# Flut-loc-ter

Утилита призванная помочь в переводе flutter приложений.

## Описание:

- При запуске утилиты она находит все исходные dart файлы в переданной папке (путь передаетя в параметре ` ---source-dir сокращенно - [-s]`).

- После этого запускается парсер который извлекает все строки попадающие под правила и исключения заданные в yaml файле конфигурации (путь к файлу конфигурации передается в параметре ` ---config-file сокращенно - [-c]` ).

- После извлечения всех строк происходит экспорт в Sqlite БД (возможно отключить передав флаг `-i`)

- Для получения справки по командам можно запустить утилиту без параметров либо с параметром `-h`

Описание формата конфига приведено в комментариях в файле assert/config.yaml

### Поля которые экспортируются в БД:

- **name** - извлеченная строка

- **context** - контекст относительно бизнес-логики (дизайна) где была найдена строка

- **file** - файл где была найдена строка

- **line_no** - номер строки в dart файле где была найдена строка

### Извлечение контекста:

Утилита при парсинге исходников также обращает внимание на файл в котором была найдена строка и маппит путь к файлу с его описанием контекста.
За это отвечает словарь **context_mapping** в файле конфигурации.
Пример (часть файла конфигурации):

```yaml
---
context_mapping:
  "screen/chat_bot": "Чат бот"
  "screen/devices": "Профиль/Устройства"
---
```

При разборе была найдена строка "Версия прошивки" в файле /Dev/workspace/nova-health-mobile/lib/src/screens/devices/detail_device_screen.dart
при сравненении пути файла с context_mapping находится ключ "screen/devices" и соответствующее значние "Профиль/Устройства"
Значение из словаря сохраняется в поле context БД.

### Замечания:

Для удобства работы с sqlite БД удобно использовать утилиту DB Browser for SQLite - https://sqlitebrowser.org/

В ней есть возможность экспорта БД в различные форматы (**JSON, CSV, SQL**)
